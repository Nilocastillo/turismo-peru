<section class="h-[100dvh] w-full animate-fade hero overflow-hidden">
  <div class="opacidad"></div>
  <section
    class="absolute inset-0 h-full justify-center z-10 m-auto flex flex-col items-center max-w-7xl px-5"
  >
    <h1
      class="text-white text-balance text-center flex items-center gap-5 text-5xl md:text-6xl lg:gap-20 lg:text-8xl tracking-tight"
    >
      Agencia de Viajes en Perú Turismo Perú Travel Designer
    </h1>
    <a
      href="https://api.whatsapp.com/send?phone=51950311111"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="Visitar perfil de Explora Perú Tours en Whatsapp"
      class="group font-medium uppercase px-4 py-5 bg-primary text-white rounded mt-10 transition duration-300 hover:bg-primary/80 hover:scale-105"
      >Hablar con un asesor de viaje</a
    >
  </section>

  <video
    autoplay
    loop
    muted
    playsinline
    id="main-video"
    preload="metadata"
    class="video cp-v h-full w-full object-cover object-top animate-duration-[2s] animate-fade-in"
  >
    <source src="/video.webm" type="video/webm" />
  </video>
</section>

<style>
  .opacidad::after {
    z-index: 10;
    content: "";
    background-color: #0d1725;
    position: absolute;
    opacity: 0.6;
    width: 100%;
    height: 100dvh;
  }
</style>

<script>
  document.addEventListener("astro:page-load", () => {
    const firstVideo = document.querySelector(
      "#main-video",
    ) as HTMLMediaElement;

    if (firstVideo) {
      const videos = document.querySelectorAll(
        ".video",
      ) as NodeListOf<HTMLMediaElement>;

      if (firstVideo.readyState >= 3) {
        videos.forEach((videoEl) => {
          videoEl.classList.remove("hidden");
          videoEl.classList.add("animate-ease-in");
        });

        return;
      }

      firstVideo.addEventListener("loadeddata", () => {
        videos.forEach((videoEl) => {
          videoEl.classList.remove("hidden");
          videoEl.classList.add("animate-ease-in");
        });
      });
    }
  });
</script>
